# ===================================================================
# Oracle Datenbank für Produktion
# Aktivieren mit: mvn spring-boot:run -Poracle
# ===================================================================

spring.datasource.url=jdbc:oracle:thin:@//192.168.178.113:1521/ORCLCDB
spring.datasource.username=plsbl
spring.datasource.password=hydroplsbl
spring.datasource.driver-class-name=oracle.jdbc.OracleDriver

# Kein Schema-Init für Oracle (existierendes Schema)
spring.sql.init.mode=never

# ===================================================================
# HikariCP Connection Pool Konfiguration
# ===================================================================

# Maximale Anzahl Verbindungen im Pool
spring.datasource.hikari.maximum-pool-size=10

# Minimale Anzahl idle Verbindungen
spring.datasource.hikari.minimum-idle=2

# Timeout für das Holen einer Verbindung aus dem Pool (ms)
spring.datasource.hikari.connection-timeout=30000

# Maximale Zeit die eine Verbindung idle sein darf (ms) - 10 Minuten
spring.datasource.hikari.idle-timeout=600000

# Maximale Lebensdauer einer Verbindung (ms) - 30 Minuten
spring.datasource.hikari.max-lifetime=1800000

# Keepalive Query alle 2 Minuten senden um Verbindung am Leben zu halten
spring.datasource.hikari.keepalive-time=120000

# Timeout für Verbindungsvalidierung (ms)
spring.datasource.hikari.validation-timeout=5000

# Test-Query um Verbindung zu validieren (Oracle-spezifisch)
spring.datasource.hikari.connection-test-query=SELECT 1 FROM DUAL

# Pool-Name für besseres Logging
spring.datasource.hikari.pool-name=PLSBL-Oracle-Pool

# Auto-Commit standardmäßig aus (Transaktionen werden von Spring verwaltet)
spring.datasource.hikari.auto-commit=false

# Leak Detection - warnt wenn Verbindung länger als 60 Sekunden nicht zurückgegeben wird
spring.datasource.hikari.leak-detection-threshold=60000

# Registriere MBeans für Monitoring
spring.datasource.hikari.register-mbeans=true
